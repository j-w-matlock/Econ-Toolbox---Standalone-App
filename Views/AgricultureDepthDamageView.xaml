<UserControl x:Class="EconToolbox.Desktop.Views.AgricultureDepthDamageView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{StaticResource Brush.SurfaceAlt}"
             SnapsToDevicePixels="True"
             UseLayoutRounding="True">
    <ScrollViewer VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled"
                  Padding="{StaticResource Padding.Card}">
        <StackPanel>
            <Border Style="{StaticResource Border.Explainer}">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="{StaticResource Margin.Stack}">
                        <TextBlock FontFamily="Segoe MDL2 Assets"
                                   Text=""
                                   FontSize="22"
                                   Foreground="{StaticResource Brush.Primary}"
                                   Margin="{StaticResource Margin.Inline}"/>
                        <TextBlock Text="Agricultural Depth-Duration Damage Guidance"
                                   FontWeight="Bold"
                                   FontSize="16"
                                   Foreground="{StaticResource Brush.Primary}"/>
                    </StackPanel>
                    <TextBlock Style="{StaticResource Text.Body}">
                        <Run Text="Use these prompts to translate crop stage, regional flood timing, and acreage risk into a depth-duration damage estimate tailored for CE/ICA studies."/>
                        <LineBreak/>
                        <Run Text="Update the exposure assumptions below, then select Calculate to refresh the modeled curve and summary outputs."/>
                    </TextBlock>
                </StackPanel>
            </Border>

            <Grid Margin="{StaticResource Margin.StackLarge}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="2*" MinWidth="360"/>
                    <ColumnDefinition Width="*" MinWidth="260"/>
                </Grid.ColumnDefinitions>

                <Border Grid.Row="0"
                        Grid.Column="0"
                        Background="{StaticResource Brush.Surface}"
                        BorderBrush="{StaticResource Brush.Border}"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="{StaticResource Padding.Content}"
                        Margin="{StaticResource Margin.InlineMedium}">
                    <StackPanel>
                        <TextBlock Text="Where is the field located?"
                                   FontWeight="SemiBold"
                                   FontSize="15"
                                   Margin="{StaticResource Margin.Stack}"/>
                        <TextBlock Text="Pick the USACE hydrologic region that best matches watershed timing. The selection shifts planting windows and flood season sampling."
                                   Style="{StaticResource Text.Body}"
                                   TextWrapping="Wrap"
                                   Margin="{StaticResource Margin.Stack}"/>
                        <ComboBox ItemsSource="{Binding Regions}"
                                  SelectedItem="{Binding SelectedRegion}"
                                  DisplayMemberPath="Name"
                                  Margin="{StaticResource Margin.Stack}"
                                  MinWidth="220"
                                  ToolTip="Choose the regional depth-duration template to review or customize."/>
                        <TextBlock Text="{Binding SelectedRegionDescription}"
                                   Style="{StaticResource Text.Body}"
                                   TextWrapping="Wrap"
                                   Margin="{StaticResource Margin.Stack}"/>

                        <Border BorderBrush="{StaticResource Brush.Border}"
                                BorderThickness="1"
                                Background="{StaticResource Brush.SurfaceAlt}"
                                CornerRadius="4"
                                Padding="{StaticResource Padding.Content}"
                                Margin="{StaticResource Margin.Stack}">
                            <StackPanel>
                                <TextBlock Text="Custom region inputs"
                                           FontWeight="SemiBold"
                                           FontSize="14"
                                           Margin="{StaticResource Margin.StackSmall}"/>
                                <TextBlock Text="Adjust flood season timing, growing season shift, and annual probability to reflect local watershed conditions."
                                           Style="{StaticResource Text.Caption}"
                                           TextWrapping="Wrap"
                                           Margin="{StaticResource Margin.StackSmall}"/>
                                <Grid Margin="{StaticResource Margin.StackSmall}">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0"
                                                Grid.Column="0"
                                                Margin="{StaticResource Margin.StackSmall}">
                                        <TextBlock Text="Region name"
                                                   Style="{StaticResource Text.Caption}"/>
                                        <TextBox Text="{Binding SelectedRegion.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 ToolTip="Display name for the selected region shown in the drop-down list."/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="0"
                                                Grid.Column="1"
                                                Margin="{StaticResource Margin.StackSmall}">
                                        <TextBlock Text="Annual Exceedance Probability"
                                                   Style="{StaticResource Text.Caption}"/>
                                        <TextBox Text="{Binding SelectedRegion.AnnualExceedanceProbabilityDisplay, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 HorizontalContentAlignment="Right"
                                                 ToolTip="Probability that a damaging flood occurs in an average year (0–1)."/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="1"
                                                Grid.Column="0"
                                                Margin="{StaticResource Margin.StackSmall}">
                                        <TextBlock Text="Flood season start (day)"
                                                   Style="{StaticResource Text.Caption}"/>
                                        <TextBox Text="{Binding SelectedRegion.FloodWindowStartDay, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 HorizontalContentAlignment="Right"
                                                 ToolTip="First day of year when flooding typically begins for the selected region."/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="1"
                                                Grid.Column="1"
                                                Margin="{StaticResource Margin.StackSmall}">
                                        <TextBlock Text="Flood season peak (day)"
                                                   Style="{StaticResource Text.Caption}"/>
                                        <TextBox Text="{Binding SelectedRegion.FloodSeasonPeakDay, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 HorizontalContentAlignment="Right"
                                                 ToolTip="Day of year when flood likelihood typically peaks for the selected region."/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="2"
                                                Grid.Column="0"
                                                Margin="{StaticResource Margin.StackSmall}">
                                        <TextBlock Text="Flood season end (day)"
                                                   Style="{StaticResource Text.Caption}"/>
                                        <TextBox Text="{Binding SelectedRegion.FloodWindowEndDay, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 HorizontalContentAlignment="Right"
                                                 ToolTip="Last day of year when flooding commonly occurs for the selected region."/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="2"
                                                Grid.Column="1"
                                                Margin="{StaticResource Margin.StackSmall}">
                                        <TextBlock Text="Season shift (days)"
                                                   Style="{StaticResource Text.Caption}"/>
                                        <TextBox Text="{Binding SelectedRegion.SeasonShiftDays, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 HorizontalContentAlignment="Right"
                                                 ToolTip="Shifts the growing season timeline relative to the flood season (negative = earlier)."/>
                                    </StackPanel>

                                    <StackPanel Grid.Row="3"
                                                Grid.Column="0"
                                                Grid.ColumnSpan="2"
                                                Margin="{StaticResource Margin.StackSmall}">
                                        <TextBlock Text="Description"
                                                   Style="{StaticResource Text.Caption}"/>
                                        <TextBox Text="{Binding SelectedRegion.Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                 AcceptsReturn="True"
                                                 TextWrapping="Wrap"
                                                 MinHeight="60"
                                                 ToolTip="Narrative description that will appear beneath the region selector."/>
                                    </StackPanel>
                                </Grid>
                                <DataGrid ItemsSource="{Binding SelectedRegion.DepthDuration}"
                                          SelectedItem="{Binding SelectedRegionPoint}"
                                          AutoGenerateColumns="False"
                                          CanUserAddRows="False"
                                          CanUserDeleteRows="False"
                                          HeadersVisibility="Column"
                                          Margin="{StaticResource Margin.StackSmall}">
                                    <DataGrid.Columns>
                                        <DataGridTextColumn Header="Depth (ft)"
                                                            Binding="{Binding DepthFeet, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.##}}"
                                                            Width="*">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="ToolTip" Value="Water depth above ground for the scenario (feet)."/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                            <DataGridTextColumn.EditingElementStyle>
                                                <Style TargetType="TextBox">
                                                    <Setter Property="HorizontalContentAlignment" Value="Right"/>
                                                    <Setter Property="ToolTip" Value="Water depth above ground for the scenario (feet)."/>
                                                </Style>
                                            </DataGridTextColumn.EditingElementStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Duration (days)"
                                                            Binding="{Binding DurationDays, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.##}}"
                                                            Width="*">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="ToolTip" Value="Length of inundation represented by the row (days)."/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                            <DataGridTextColumn.EditingElementStyle>
                                                <Style TargetType="TextBox">
                                                    <Setter Property="HorizontalContentAlignment" Value="Right"/>
                                                    <Setter Property="ToolTip" Value="Length of inundation represented by the row (days)."/>
                                                </Style>
                                            </DataGridTextColumn.EditingElementStyle>
                                        </DataGridTextColumn>
                                        <DataGridTextColumn Header="Base damage (fraction)"
                                                            Binding="{Binding BaseDamage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.###}}"
                                                            Width="*">
                                            <DataGridTextColumn.ElementStyle>
                                                <Style TargetType="TextBlock">
                                                    <Setter Property="ToolTip" Value="Fraction of acreage lost at the specified depth-duration point (0–1)."/>
                                                </Style>
                                            </DataGridTextColumn.ElementStyle>
                                            <DataGridTextColumn.EditingElementStyle>
                                                <Style TargetType="TextBox">
                                                    <Setter Property="HorizontalContentAlignment" Value="Right"/>
                                                    <Setter Property="ToolTip" Value="Fraction of acreage lost at the specified depth-duration point (0–1)."/>
                                                </Style>
                                            </DataGridTextColumn.EditingElementStyle>
                                        </DataGridTextColumn>
                                    </DataGrid.Columns>
                                </DataGrid>
                                <StackPanel Orientation="Horizontal"
                                            HorizontalAlignment="Right"
                                            Margin="{StaticResource Margin.StackSmall}">
                                    <Button Content="Add point"
                                            Command="{Binding AddDepthDurationPointCommand}"
                                            Margin="{StaticResource Margin.Inline}"/>
                                    <Button Content="Remove selected"
                                            Command="{Binding RemoveDepthDurationPointCommand}"
                                            Margin="{StaticResource Margin.Inline}"/>
                                </StackPanel>
                                <TextBlock Text="Base damage represents the fraction of acreage lost at the specified depth and duration (0 = no loss, 1 = total loss)."
                                           Style="{StaticResource Text.Caption}"
                                           TextWrapping="Wrap"
                                           Margin="{StaticResource Margin.StackSmall}"/>
                            </StackPanel>
                        </Border>

                        <Separator Margin="{StaticResource Margin.Stack}"/>

                        <TextBlock Text="What crop is planted on the acre?"
                                   FontWeight="SemiBold"
                                   FontSize="15"
                                   Margin="{StaticResource Margin.Stack}"/>
                        <ComboBox ItemsSource="{Binding Crops}"
                                  SelectedItem="{Binding SelectedCrop}"
                                  DisplayMemberPath="Name"
                                  Margin="{StaticResource Margin.Stack}"
                                  MinWidth="220"
                                  ToolTip="Select the crop profile sourced from USDA NASS categories."/>
                        <TextBlock Text="{Binding SelectedCropDescription}"
                                   Style="{StaticResource Text.Body}"
                                   TextWrapping="Wrap"
                                   Margin="{StaticResource Margin.Stack}"/>

                        <Border BorderBrush="{StaticResource Brush.Border}"
                                BorderThickness="1"
                                Background="{StaticResource Brush.SurfaceAlt}"
                                CornerRadius="4"
                                Padding="{StaticResource Padding.Content}"
                                Margin="{StaticResource Margin.Stack}">
                            <StackPanel>
                                <TextBlock Text="Crop parameters"
                                           FontWeight="SemiBold"
                                           FontSize="14"
                                           Margin="{StaticResource Margin.StackSmall}"/>
                                <TextBlock Text="Describe the crop and adjust the damage and impact multipliers to capture localized resilience."
                                           Style="{StaticResource Text.Caption}"
                                           TextWrapping="Wrap"
                                           Margin="{StaticResource Margin.StackSmall}"/>
                                <TextBox Text="{Binding SelectedCrop.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         Margin="{StaticResource Margin.StackSmall}"
                                         ToolTip="Enter the display label for the selected crop."/>
                                <TextBox Text="{Binding SelectedCrop.Description, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         Margin="{StaticResource Margin.StackSmall}"
                                         AcceptsReturn="True"
                                         TextWrapping="Wrap"
                                         MinHeight="60"
                                         ToolTip="Provide a description that explains the crop assumptions for this selection."/>
                                <StackPanel Orientation="Horizontal"
                                            Margin="{StaticResource Margin.StackSmall}">
                                    <StackPanel Width="140"
                                                Margin="{StaticResource Margin.Inline}">
                                        <TextBlock Text="Damage factor"
                                                   Style="{StaticResource Text.Caption}"/>
                                        <TextBox Text="{Binding SelectedCrop.DamageFactor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.###}}"
                                                 HorizontalContentAlignment="Right"
                                                 ToolTip="Scaling factor that adjusts depth-duration damages for the crop."/>
                                    </StackPanel>
                                    <StackPanel Width="140"
                                                Margin="{StaticResource Margin.Inline}">
                                        <TextBlock Text="Impact modifier"
                                                   Style="{StaticResource Text.Caption}"/>
                                        <TextBox Text="{Binding SelectedCrop.ImpactModifier, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.###}}"
                                                 HorizontalContentAlignment="Right"
                                                 ToolTip="Multiplier that affects the modeled probability of experiencing a damaging flood."/>
                                    </StackPanel>
                                </StackPanel>
                                <TextBlock Text="Damage factor scales depth-duration damages, while the impact modifier influences the modeled probability of a damaging event."
                                           Style="{StaticResource Text.Caption}"
                                           TextWrapping="Wrap"
                                           Margin="{StaticResource Margin.StackSmall}"/>
                            </StackPanel>
                        </Border>

                        <Separator Margin="{StaticResource Margin.Stack}"/>

                        <TextBlock Text="How resilient is the field during the season?"
                                   FontWeight="SemiBold"
                                   FontSize="15"
                                   Margin="{StaticResource Margin.Stack}"/>

                        <ItemsControl ItemsSource="{Binding StageExposures}"
                                      Margin="{StaticResource Margin.StackSmall}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border BorderBrush="{StaticResource Brush.Border}"
                                            BorderThickness="1"
                                            CornerRadius="4"
                                            Padding="{StaticResource Padding.Content}"
                                            Margin="{StaticResource Margin.StackSmall}"
                                            Background="{StaticResource Brush.SurfaceAlt}">
                                        <StackPanel>
                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Stretch">
                                                <StackPanel Width="220">
                                                    <TextBlock Text="{Binding StageName}"
                                                               FontWeight="SemiBold"
                                                               FontSize="14"/>
                                                    <TextBlock Text="{Binding StageWindow}"
                                                               Style="{StaticResource Text.Caption}"/>
                                                    <TextBlock Text="{Binding TimingWindowDisplay}"
                                                               Style="{StaticResource Text.Caption}"
                                                               TextWrapping="Wrap"/>
                                                </StackPanel>
                                                <StackPanel Orientation="Horizontal"
                                                            HorizontalAlignment="Right"
                                                            Margin="{StaticResource Margin.InlineLarge}"
                                                            VerticalAlignment="Center">
                                                    <StackPanel Margin="{StaticResource Margin.Inline}">
                                                        <TextBlock Text="Exposure (days)"
                                                                   Style="{StaticResource Text.Caption}"/>
                                                        <TextBox Text="{Binding ExposureDays, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.##}}"
                                                                 HorizontalContentAlignment="Right"
                                                                 MinWidth="80"
                                                                 ToolTip="Estimated number of days this growth stage experiences inundation in a typical event."/>
                                                    </StackPanel>
                                                    <StackPanel Margin="{StaticResource Margin.Inline}">
                                                        <TextBlock Text="Flood tolerance (days)"
                                                                   Style="{StaticResource Text.Caption}"/>
                                                        <TextBox Text="{Binding FloodToleranceDays, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.##}}"
                                                                 HorizontalContentAlignment="Right"
                                                                 MinWidth="80"
                                                                 ToolTip="Number of days this stage can withstand inundation before significant damage occurs."/>
                                                    </StackPanel>
                                                    <StackPanel Margin="{StaticResource Margin.Inline}">
                                                        <Button Content="Reset"
                                                                Command="{Binding ResetCommand}"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </StackPanel>
                                            <TextBlock Text="{Binding StageGuidance}"
                                                       Style="{StaticResource Text.Body}"
                                                       TextWrapping="Wrap"
                                                       Margin="{StaticResource Margin.StackSmall}"/>
                                            <TextBlock Text="{Binding TimingModifierDisplay}"
                                                       Style="{StaticResource Text.Caption}"
                                                       Margin="{StaticResource Margin.StackSmall}"/>
                                            <TextBlock Text="{Binding DefaultToleranceDisplay}"
                                                       Style="{StaticResource Text.Caption}"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>

                        <Separator Margin="{StaticResource Margin.Stack}"/>

                        <Grid Margin="{StaticResource Margin.Stack}">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <StackPanel Grid.Column="0"
                                        Margin="{StaticResource Margin.Inline}">
                                <TextBlock Text="Average response"
                                           Style="{StaticResource Text.Caption}"/>
                                <TextBox Text="{Binding AverageResponse, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:0.##}}"
                                         HorizontalContentAlignment="Right"
                                         MinWidth="120"
                                         ToolTip="Adjusts how strongly seasonal stress amplifies modeled damages (1 = default response)."/>
                                <TextBlock Text="Scales the seasonal exposure severity."
                                           Style="{StaticResource Text.Caption}"
                                           TextWrapping="Wrap"
                                           Margin="{StaticResource Margin.StackSmall}"/>
                            </StackPanel>
                            <StackPanel Grid.Column="1"
                                        Margin="{StaticResource Margin.Inline}">
                                <TextBlock Text="Simulation years"
                                           Style="{StaticResource Text.Caption}"/>
                                <TextBox Text="{Binding SimulationYears, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         HorizontalContentAlignment="Right"
                                         MinWidth="120"
                                         ToolTip="Number of simulated seasons summarized in the narrative output."/>
                                <TextBlock Text="Used in the narrative to describe modeled seasons."
                                           Style="{StaticResource Text.Caption}"
                                           TextWrapping="Wrap"
                                           Margin="{StaticResource Margin.StackSmall}"/>
                            </StackPanel>
                        </Grid>
                    </StackPanel>
                </Border>

                <Border Grid.Row="0"
                        Grid.Column="1"
                        Background="{StaticResource Brush.Surface}"
                        BorderBrush="{StaticResource Brush.Border}"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="{StaticResource Padding.Content}">
                    <StackPanel>
                        <TextBlock Text="Modeled impact probability"
                                   FontWeight="SemiBold"
                                   FontSize="15"
                                   Margin="{StaticResource Margin.Stack}"/>
                        <TextBlock Text="{Binding ModeledImpactProbabilityDisplay}"
                                   FontSize="32"
                                   FontWeight="Bold"
                                   Foreground="{StaticResource Brush.Primary}"
                                   Margin="{StaticResource Margin.Stack}"/>
                        <TextBlock Text="{Binding ImpactSummary}"
                                   Style="{StaticResource Text.Body}"
                                   TextWrapping="Wrap"
                                   Margin="{StaticResource Margin.Stack}"/>
                        <Separator Margin="{StaticResource Margin.Stack}"/>
                        <TextBlock Text="Mean crop insight"
                                   FontWeight="SemiBold"
                                   FontSize="15"
                                   Margin="{StaticResource Margin.Stack}"/>
                        <TextBlock Text="{Binding CropInsight}"
                                   Style="{StaticResource Text.Body}"
                                   TextWrapping="Wrap"
                                   Margin="{StaticResource Margin.Stack}"/>
                        <Separator Margin="{StaticResource Margin.Stack}"/>
                        <StackPanel Orientation="Horizontal" Margin="{StaticResource Margin.Stack}">
                            <TextBlock Text="Average damage across scenarios:"
                                       Style="{StaticResource Text.Body}"/>
                            <TextBlock Text="{Binding MeanDamageDisplay}"
                                       FontWeight="SemiBold"
                                       Foreground="{StaticResource Brush.Primary}"
                                       Margin="{StaticResource Margin.Inline}"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <Border Grid.Row="1"
                        Grid.ColumnSpan="2"
                        Background="{StaticResource Brush.Surface}"
                        BorderBrush="{StaticResource Brush.Border}"
                        BorderThickness="1"
                        CornerRadius="6"
                        Padding="{StaticResource Padding.Content}"
                        Margin="{StaticResource Margin.TopLarge}">
                    <StackPanel>
                        <TextBlock Text="Depth-duration-damage table"
                                   FontWeight="SemiBold"
                                   FontSize="15"
                                   Margin="{StaticResource Margin.Stack}"/>
                        <DataGrid ItemsSource="{Binding DepthDurationRows}"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  HeadersVisibility="Column"
                                  Margin="0"
                                  IsReadOnly="True">
                            <DataGrid.Resources>
                                <Style TargetType="TextBlock">
                                    <Setter Property="Margin" Value="2"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>
                            </DataGrid.Resources>
                            <DataGrid.Columns>
                                <DataGridTextColumn Binding="{Binding DepthFeet, StringFormat={}{0:0.##}}"
                                                    Width="*"
                                                    Header="Depth (ft)"/>
                                <DataGridTextColumn Binding="{Binding DurationDays, StringFormat={}{0:0.##}}"
                                                    Width="*"
                                                    Header="Duration (days)"/>
                                <DataGridTextColumn Binding="{Binding DamagePercent, StringFormat={}{0:0.##}}" Width="*">
                                    <DataGridTextColumn.Header>
                                        <TextBlock Text="Damage (%)"/>
                                    </DataGridTextColumn.Header>
                                </DataGridTextColumn>
                            </DataGrid.Columns>
                        </DataGrid>
                    </StackPanel>
                </Border>

                <StackPanel Grid.Row="2"
                            Grid.ColumnSpan="2"
                            Orientation="Horizontal"
                            HorizontalAlignment="Right"
                            Margin="{StaticResource Margin.StackLarge}">
                    <Button Content="Calculate"
                            Command="{Binding ComputeCommand}"
                            Margin="{StaticResource Margin.Inline}"/>
                    <Button Content="CSV Export"
                            Command="{Binding ExportCommand}"
                            Margin="{StaticResource Margin.Inline}"/>
                </StackPanel>
            </Grid>
        </StackPanel>
    </ScrollViewer>
</UserControl>
