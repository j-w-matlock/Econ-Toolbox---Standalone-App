<UserControl x:Class="EconToolbox.Desktop.Views.ProjectView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Background="{DynamicResource App.SurfaceAlt}"
             SnapsToDevicePixels="True"
             UseLayoutRounding="True">
    <ScrollViewer Style="{StaticResource ScrollViewer.Page}">
        <Grid Margin="0,0,0,16"
              Style="{StaticResource Layout.ContentGrid}">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <Border Grid.Row="0"
                    Style="{StaticResource Border.Card}">
                <StackPanel>
                    <TextBlock Text="Task Input"
                               Style="{StaticResource Text.SectionTitle}"
                               Margin="0,0,0,8"/>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Grid.Column="0" Margin="0,0,12,0">
                            <TextBlock Text="Task Name"/>
                            <TextBox Text="{Binding NewTaskName, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource Form.TextBoxWide}"/>
                        </StackPanel>
                        <StackPanel Grid.Column="1" Margin="0,0,12,0">
                            <TextBlock Text="Urgency"/>
                            <TextBox Text="{Binding NewTaskUrgency, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource Form.TextBox}"/>
                        </StackPanel>
                        <StackPanel Grid.Column="2" Margin="0,0,12,0">
                            <TextBlock Text="Importance"/>
                            <TextBox Text="{Binding NewTaskImportance, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource Form.TextBox}"/>
                        </StackPanel>
                        <StackPanel Grid.Column="3" Margin="0,0,12,0">
                            <TextBlock Text="Complexity"/>
                            <TextBox Text="{Binding NewTaskComplexity, UpdateSourceTrigger=PropertyChanged}"
                                     Style="{StaticResource Form.TextBox}"/>
                        </StackPanel>
                        <Button Grid.Column="4"
                                Content="Add Task"
                                VerticalAlignment="Bottom"
                                Command="{Binding AddTaskCommand}"
                                Style="{StaticResource Button.Action}"/>
                    </Grid>
                </StackPanel>
            </Border>

            <Border Grid.Row="1"
                    Style="{StaticResource Border.Card}"
                    Margin="0,12,0,0">
                <StackPanel>
                    <TextBlock Text="Adjust Priority Weights"
                               Style="{StaticResource Text.SectionTitle}"
                               Margin="0,0,0,8"/>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="80"/>
                        </Grid.ColumnDefinitions>

                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Urgency Weight" VerticalAlignment="Center"/>
                        <Slider Grid.Row="0" Grid.Column="1" Minimum="0.1" Maximum="5.0"
                                Value="{Binding Weights.UrgencyWeight, UpdateSourceTrigger=PropertyChanged}"/>
                        <TextBlock Grid.Row="0" Grid.Column="2" Text="{Binding Weights.UrgencyWeight, StringFormat=F2}" VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Importance Weight" VerticalAlignment="Center"/>
                        <Slider Grid.Row="1" Grid.Column="1" Minimum="0.1" Maximum="5.0"
                                Value="{Binding Weights.ImportanceWeight, UpdateSourceTrigger=PropertyChanged}"/>
                        <TextBlock Grid.Row="1" Grid.Column="2" Text="{Binding Weights.ImportanceWeight, StringFormat=F2}" VerticalAlignment="Center"/>

                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Complexity Weight" VerticalAlignment="Center"/>
                        <Slider Grid.Row="2" Grid.Column="1" Minimum="0.1" Maximum="5.0"
                                Value="{Binding Weights.ComplexityWeight, UpdateSourceTrigger=PropertyChanged}"/>
                        <TextBlock Grid.Row="2" Grid.Column="2" Text="{Binding Weights.ComplexityWeight, StringFormat=F2}" VerticalAlignment="Center"/>

                        <Button Grid.Row="3" Grid.Column="0" Grid.ColumnSpan="3"
                                Content="Recalculate Priorities"
                                Command="{Binding RecalculatePrioritiesCommand}"
                                Margin="0,10,0,0"
                                Style="{StaticResource Button.Action}"
                                HorizontalAlignment="Left"/>
                    </Grid>
                </StackPanel>
            </Border>

            <Border Grid.Row="2"
                    Style="{StaticResource Border.Card}"
                    Margin="0,12,0,0">
                <StackPanel>
                    <TextBlock Text="Prioritized Tasks"
                               Style="{StaticResource Text.SectionTitle}"
                               Margin="0,0,0,8"/>
                    <DataGrid ItemsSource="{Binding Tasks}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              HeadersVisibility="Column"
                              ColumnWidth="*">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Task" Binding="{Binding TaskName}"/>
                            <DataGridTextColumn Header="Urgency" Binding="{Binding Urgency}"/>
                            <DataGridTextColumn Header="Importance" Binding="{Binding Importance}"/>
                            <DataGridTextColumn Header="Complexity" Binding="{Binding Complexity}"/>
                            <DataGridTextColumn Header="Priority Score" Binding="{Binding PriorityScore, StringFormat=F2}" IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </StackPanel>
            </Border>
        </Grid>
    </ScrollViewer>
</UserControl>
